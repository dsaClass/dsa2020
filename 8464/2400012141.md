## 状态: [Accepted](http://dsbpython.openjudge.cn/dspythonbook/solution/48355292/)

```
基本信息
#:48355292
题目:P0980
提交人:邵家祺2400012141
内存:18872kB
时间:3193ms
语言:Python3
提交时间:2025-02-25 15:35:52
```

#### 题目分析

这个问题是典型的股票买卖问题，其中有一个限制条件：只能进行两次买卖。为了获得最大利润，我们需要在两个阶段内进行两次买卖。

#### 解题方法

1. 分两次买卖：将问题分为两个阶段：

   第一阶段：从第一天到某一天买入卖出，获得最大利润。

   第二阶段：从某一天到最后一天买入卖出，获得最大利润。

2. 通过动态规划来实现这个问题：

   `profit1[i]`：表示在第 `i` 天之前，进行一次买卖能获得的最大利润。

   `profit2[i]`：表示从第 `i` 天到最后，进行一次买卖能获得的最大利润。

3. 步骤：

   计算 `profit1[i]`：我们从左到右遍历，保持当前的最低价格，计算每一天卖出的利润，存储最大利润。

   计算 `profit2[i]`：我们从右到左遍历，保持当前的最高价格，计算每一天买入的利润，存储最大利润。

4. 最终结果：在每一天 `i`，我们可以通过 `profit1[i] + profit2[i]` 来计算两次买卖的总利润。我们希望找到最大的总利润。

#### 踩过的坑

一开始把问题想得太简单，认为只要在最高点卖出。实际上要考虑在每一单上分为两段后所有可能的最大值。